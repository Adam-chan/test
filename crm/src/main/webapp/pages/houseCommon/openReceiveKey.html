<div class="row">
	<div class="col-xs-12 my-group">
		<div class="row">
			<div class="col-md-12">
				<div class="form-xs form-group row">
					<label class="col-xs-2 control-label">钥匙类型：</label>
					<div class="col-xs-4">
						<div class="radio-inline input-xs">
							<label>
								<input id="type" name="type" type="radio" class="ace" value="1" checked="checked">
								<span class="lbl">钥匙</span>
							</label>
						</div>
						<div class="radio-inline input-xs">
							<label>
								<input id="type" name="type" type="radio" class="ace" value="2">
								<span class="lbl">门禁卡</span>
							</label>
						</div>
						<div class="radio-inline input-xs">
							<label>
								<input id="type" name="type" type="radio" class="ace" value="3">
								<span class="lbl">密码</span>
							</label>
						</div>
					</div>
				</div>
			</div>
			<div class="col-md-12 key">
				<div class="form-xs form-group row">
					<label class="col-xs-2 control-label">钥匙编号：</label>
					<div class="col-xs-4">
						<input id="keyCode" name="keyCode" type="text" class="input-xs" style="width: 100%;" maxlength="16" />
					</div>
				</div>
			</div>
			<div class="col-md-12 password" style="display: none;">
				<div class="form-xs form-group row">
					<label class="col-xs-2 control-label">密码：</label>
					<div class="col-xs-4">
						<input id="password" name="password" type="text" class="input-xs" style="width: 100%;" maxlength="10" />
					</div>
				</div>
			</div>
			<div class="col-md-6">
				<div class="form-xs form-group row">
					<label class="col-xs-4 control-label">收取人：</label>
					<div class="col-xs-8">
						<input id="colelectUser" name="colelectUser" type="text" class="input-xs" style="width: 100%;" />
						<input id="colelectUserId" name="colelectUserId" type="hidden" />
					</div>
				</div>
			</div>
			<div class="col-md-6">
				<div class="form-xs form-group row">
					<label class="col-xs-4 control-label">联系电话：</label>
					<div class="col-xs-8">
						<input id="colelectContact" name="colelectContact" type="text" class="input-xs" style="width: 100%; background-color: #FFFFFF !important; color: #424242 !important;" disabled="disabled" />
					</div>
				</div>
			</div>
			<div class="col-md-6">
				<div class="form-xs form-group row">
					<label class="col-xs-4 control-label">收取区：</label>
					<div class="col-xs-8">
						<input id="colelectZone" name="colelectZone" type="text" class="input-xs" style="width: 100%; background-color: #FFFFFF !important; color: #424242 !important;" disabled="disabled" />
						<input id="colelectZoneCode" name="colelectZoneCode" type="hidden" />
					</div>
				</div>
			</div>
			<div class="col-md-6">
				<div class="form-xs form-group row">
					<label class="col-xs-4 control-label">收取组：</label>
					<div class="col-xs-8">
						<input id="colelectOrg" name="colelectOrg" type="text" class="input-xs" style="width: 100%; background-color: #FFFFFF !important; color: #424242 !important;" disabled="disabled" />
						<input id="colelectOrgCode" name="colelectOrgCode" type="hidden" />
					</div>
				</div>
			</div>
			<div class="col-md-6 key">
				<div class="form-xs form-group row">
					<label class="col-xs-4 control-label">存放人：</label>
					<div class="col-xs-8">
						<input id="deposit" name="deposit" type="text" class="input-xs" style="width: 100%;" />
						<input id="depositUserId" name="depositUserId" type="hidden" />
					</div>
				</div>
			</div>
			<div class="col-md-6 key">
				<div class="form-xs form-group row">
					<label class="col-xs-4 control-label">存放实体店：</label>
					<div class="col-xs-8">
						<input id="depositStore" name="depositStore" type="text" class="input-xs" style="width: 100%; background-color: #FFFFFF !important; color: #424242 !important;" disabled="disabled" />
						<input id="depositStoreId" name="depositStoreId" type="hidden" />
					</div>
				</div>
			</div>
			<div class="col-md-6 key">
				<div class="form-xs form-group row">
					<label class="col-xs-4 control-label">联系电话：</label>
					<div class="col-xs-8">
						<input id="depositContact" name="depositContact" type="text" class="input-xs" style="width: 100%; background-color: #FFFFFF !important; color: #424242 !important;" disabled="disabled" />
					</div>
				</div>
			</div>
			<div class="col-md-12 key">
				<div class="form-xs form-group row">
					<label class="col-xs-2 control-label">备注：</label>
					<div class="col-xs-10">
						<textarea id="remark" name="remark" rows="3" maxlength="83" style="width: 100%; resize: none;"></textarea>
					</div>
				</div>
			</div>
		</div>
		<input id="houseInfoId" name="houseInfoId" type="hidden" value="${houseInfoId!}" />
		<input id="houseCode" name="houseCode" type="hidden" value="${houseCode!}" />
	</div>
</div>
<script type="text/javascript">
/* 添加钥匙 */
aihome.addKey = function() {
	var keyId = "";
	if($(":radio:checked").val() == 3) {
		if($("#password").val().trim() == "") {
			alert("请输入密码！");
			return keyId;
		}
		if($("#colelectUser").val() == "") {
			alert("请输入收取人！");
			return keyId;
		}
	} else {
		if($("#keyCode").val().trim() == "") {
			alert("请输入钥匙编号！");
			return keyId;
		}
		if($("#colelectUser").val() == "") {
			alert("请输入收取人！");
			return keyId;
		}
		if($("#deposit").val() == "") {
			alert("请输入存放人！");
			return keyId;
		}
	}
	$.ajax({
		url : "${CTX}/commonSearch/addKey.do",
		async : false,
		dataType : "json",
		data : {
			houseInfoId : $("#houseInfoId").val(),
			houseCode : $("#houseCode").val(),
			type : $("#type").val(),
			colelectUser : $("#colelectUser").val(),
			colelectUserId : $("#colelectUserId").val(),
			colelectOrg : $("#colelectOrg").val(),
			colelectOrgCode : $("#colelectOrgCode").val(),
			colelectZone : $("#colelectZone").val(),
			colelectZoneCode : $("#colelectZoneCode").val(),
			colelectContact : $("#colelectContact").val(),
			keyCode : $("#keyCode").val().trim(),
			password : $("#password").val(),
			deposit : $("#deposit").val(),
			depositUserId : $("#depositUserId").val(),
			depositStoreId : $("#depositStoreId").val(),
			depositContact : $("#depositContact").val(),
			remark : $("#remark").val()
		},
		success : function(data) {
			keyId = data;
			alert("添加钥匙成功！");
		}
	});
	return keyId;
}
aihome.radioChange = function(type) {
	if(type == 3) {
		$(".key").hide();
		$(".key").find(":input").val("");
		$(".password").show();
	} else {
		$(".key").show();
		$(".password").hide();
		$(".password").find(":input").val("");
	}
}
$(function () {
	$(":radio").change(function() {
		aihome.radioChange($(this).val());
	});
	$("#colelectUser").autocomplete({
		source : function(request, response) {
			$.ajax({
				url : "${CTX}/commonSearch/personnelInfoList.do",
				dataType : "json",
				type : 'post',
				data : {
					matchStr : request.term
				},
				success : function(data) {
					var array = new Array(data.length);
					for (var i = 0; i < data.length; i++) {
						var temp = {
							key : data[i].userId,
							value : data[i].userName,
							colelectContact : data[i].userContact,
							colelectZoneCode : data[i].zoneCode,
							colelectZone : data[i].zone,
							colelectOrgCode : data[i].groupCode,
							colelectOrg : data[i].group
						};
						array[i] = temp;
					}
					response(array);
				}
			});
		},
		select : function(event, ui) {
			$("#colelectUserId").val(ui.item.key);
			$("#colelectUser").val(ui.item.value);
			$("#colelectContact").val(ui.item.colelectContact);
			$("#colelectZoneCode").val(ui.item.colelectZoneCode);
			$("#colelectZone").val(ui.item.colelectZone);
			$("#colelectOrgCode").val(ui.item.colelectOrgCode);
			$("#colelectOrg").val(ui.item.colelectOrg);
			event.preventDefault();
		}
	});
	$("#colelectUser").blur(function() {
		if($("#colelectUser").val() == "") {
			$("#colelectUserId").val("");
			$("#colelectContact").val("");
			$("#colelectZoneCode").val("");
			$("#colelectZone").val("");
			$("#colelectOrgCode").val("");
			$("#colelectOrg").val("");
		}
		$(this).attr("placeholder", "");
	});
	$("#deposit").autocomplete({
		source : function(request, response) {
			$.ajax({
				url : "${CTX}/commonSearch/personnelInfoList.do",
				dataType : "json",
				type : 'post',
				data : {
					matchStr : request.term
				},
				success : function(data) {
					var array = new Array(data.length);
					for (var i = 0; i < data.length; i++) {
						var temp = {
							key : data[i].userId,
							value : data[i].userName,
							depositStoreId : data[i].storeCode,
							depositStore : data[i].store,
							depositContact : data[i].userContact
						};
						array[i] = temp;
					}
					response(array);
				}
			});
		},
		select : function(event, ui) {
			$("#depositUserId").val(ui.item.key);
			$("#deposit").val(ui.item.value);
			$("#depositStoreId").val(ui.item.depositStoreId);
			$("#depositStore").val(ui.item.depositStore);
			$("#depositContact").val(ui.item.depositContact);
			event.preventDefault();
		}
	});
	$("#deposit").blur(function() {
		if($("#deposit").val() == "") {
			$("#depositUserId").val("");
			$("#depositStoreId").val("");
			$("#depositStore").val("");
			$("#depositContact").val("");
		}
		$(this).attr("placeholder", "");
	});
	$(".ui-autocomplete.ui-front.ui-menu.ui-widget.ui-widget-content").css("height", "116");
})
</script>
