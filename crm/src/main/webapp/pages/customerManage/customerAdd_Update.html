<input type="hidden" id="customerId" value="${(customerModel.id)!''}" /> 
<div class="row" >
	<div class="col-xs-12 my-group">
		<div class="form-horizontal row my-inputs">
			<!-- 第一行 -->
			<div class="row">
				<div class="col-md-3">
					<div class="form-xs form-group row">
						<label class="col-xs-5 control-label">联系电话： </label>
						<div class="col-xs-7">
							<div class="col-xs-12">
								<input id="tel" class="form-control input-xs" name="tell" type="text" value="${(customerModel.tell)!''}" onBlur="customerCheck()">
							</div>
						</div>
					</div>
				</div>
				<div class="col-md-3">
					<div class="form-xs form-group row">
						<label class="col-xs-5 control-label">联系人姓名： </label>
						<div class="col-xs-7">
							<div class="col-xs-12">
								<input id=customerName class="form-control input-xs customer" name="customerName" type="text" >
							</div>
						</div>
					</div>
				</div>
				<div class="col-md-3">
					<div class="form-xs form-group row">
						<div class="col-xs-10">
							&nbsp;&nbsp;&nbsp;&nbsp;<input id="isStaff" value="1" name="isStaff"
								type="checkbox">是我爱我家员工
						</div>
					</div>
				</div>
				<div class="col-md-3">
					<div class="form-xs form-group row">
						<label class="col-xs-6 control-label">类型：</label> 
						<label class="col-xs-2 control-label"><input name="userType" id="userType" value="1" class="customer" type="radio" checked />个人</label>
						<label class="col-xs-2 control-label"><input name="userType" id="userType" value="2" class="customer" type="radio" />企业</label>
					</div>
				</div>
			</div>
			<!-- 第二行 -->
			<div class="row">
				<div class="col-md-3">
					<div class="form-xs form-group row">
						<label class="col-xs-5 control-label">备用电话： </label>
						<div class="col-xs-7">
							<div class="col-xs-12">
								<input id="spareTell" class="form-control input-xs customer" name="spareTell" type="text" value="${(customerModel.spareTell)!''}">
							</div>
						</div>
					</div>
				</div>
				<div class="col-md-3">
					<div class="form-xs form-group row">
						<label class="col-xs-6 control-label">性别：</label> 
						<label class="col-xs-2 control-label"><input name="sex" id="sex" value="1" type="radio" class="customer" checked/>男&nbsp;</label>
						<label class="col-xs-2 control-label"><input name="sex" id="sex" value="2" type="radio" class="customer"/>女</label>
					</div>
				</div>
				<div class="col-md-3">
					<div class="form-xs form-group row">
						<label class="col-xs-6 control-label">证件类型： </label>
						<div class="col-xs-6">
							<div class="col-xs-12">
								<select id="idType" class="input-xs form-control customer" name="idType">
									<option selected="selected" value="1">身份证</option>
									<option value="2">军官证</option>
								</select>
							</div>
						</div>
					</div>
				</div>
				<div class="col-md-3">
					<div class="form-xs form-group row">
						<label class="col-xs-5 control-label">证件号码： </label>
						<div class="col-xs-7">
							<div class="col-xs-12">
								<input id="identityCode" class="form-control input-xs customer" name="identityCode"
									type="text" value="${(customerModel.idCode)!''}">
							</div>
						</div>
					</div>
				</div>
			</div>
			<!-- 第三行 -->
			<div class="row">
				<div class="col-md-3">
					<div class="form-xs form-group row">
						<label class="col-xs-5 control-label">国籍： </label>
						<div class="col-xs-7">
							<div class="col-xs-12">
								<select id="country" class="input-xs form-control customer"
									name="country">
									<option selected="selected" value="1">中国</option>
									<option value="2">美国</option>
									<option value="3">英国</option>
								</select>
							</div>
						</div>
					</div>
				</div>
				<div class="col-md-3">
					<div class="form-xs form-group row">
						<label class="col-xs-5 control-label">户籍： </label>
						<div class="col-xs-7">
							<div class="col-xs-12">
								<input id="huji" class="form-control input-xs customer"
									name="huji" type="text"
									value="${(customerModel.censusRegister)!''}">
							</div>
						</div>
					</div>
				</div>
				<div class="col-md-3">
					<div class="form-xs form-group row">
						<label class="col-xs-6 control-label">公积金余额： </label>
						<div class="col-xs-5">
							<div class="col-xs-12">
								<input id="pubFundsBlance" class="form-control input-xs customer"
									name="pubFundsBlance" type="text"
									value="${(customerModel.pubFundsBlance)!''}">
							</div>
						</div>
						<div class="col-xs-1">
							<label>元</label>
						</div>
					</div>
				</div>
				<div class="col-md-3">
					<div class="form-xs form-group row">
						<label class="col-xs-6 control-label">公积金月缴额： </label>
						<div class="col-xs-5">
							<div class="col-xs-12">
								<input id="pubFundsMonth" class="form-control input-xs customer"
									name="pubFundsMonth" type="text"
									value="${(customerModel.pubFundsMonth)!''}">
							</div>
						</div>
						<div class="col-xs-1 ">
							<label>元</label>
						</div>
					</div>
				</div>
			</div>
			<!-- 第四行 -->
			<div class="row">
				<div class="col-md-3">
					<div class="form-xs form-group row">
						<label class="col-xs-6 control-label">购房经验： </label> <label
							class="col-xs-2 control-label"><input name="buyExperience" class="customer"
							id="buyExperience" value="1" type="radio" checked />是</label> <label
							class="col-xs-2 control-label"><input name="buyExperience" class="customer"
							id="buyExperience" value="2" type="radio" />否</label>
					</div>
				</div>
				<div class="col-md-3">
					<div class="form-xs form-group row">
						<label class="col-xs-6 control-label">贷款记录： </label> <label
							class="col-xs-2 control-label"><input name="loanRecord" class="customer"
							id="loanRecord" value="1" type="radio" checked />是</label> <label
							class="col-xs-2 control-label"><input name="loanRecord" class="customer"
							id="loanRecord" value="2" type="radio" />否</label>
					</div>
				</div>
				<div class="col-md-3">
					<div class="form-xs form-group row">
						<label class="col-xs-6 control-label">开收入证明： </label> <label
							class="col-xs-2 control-label"><input name="kaiShou" class="customer"
							id="kaiShou" value="1" type="radio" checked/>是</label> <label
							class="col-xs-2 control-label"><input name="kaiShou" class="customer"
							id="kaiShou" value="2" type="radio" />否</label>
					</div>
				</div>
				<div class="col-md-3">
					<div class="form-xs form-group row">
						<label class="col-xs-6 control-label">看房经历： </label>
						<label class="col-xs-2 control-label">
						<input name="viewHome" id="viewHome" value="1" type="radio" class="customer" checked />是</label>
						<label class="col-xs-2 control-label">
						<input name="viewHome" id="viewHome" value="2" type="radio" class="customer" />否</label>
					</div>
				</div>
				<!-- <div class="col-md-3">
					<div class="form-xs form-group row">
						<label class="col-xs-3 control-label">年龄： </label>
						<div class="col-xs-3">
							<div class="col-xs-12">
								<input id="userAge" class="form-control input-xs"
									name="userAge" type="text"
									value="${(customerModel.userAge)!''}">
							</div>
						</div>
					</div>
				</div> -->
			</div>
			<!-- 第五行 -->
			<div class="row">
				<div class="col-md-6">
					<div class="form-xs form-group row">
						<label class="col-xs-3 control-label">现住址： </label>
						<div class="col-xs-9">
							<div class="col-xs-12">
								<input id="presentAddress" class="form-control input-xs customer" name="presentAddress"
									type="text" value="${(customerModel.presentAddress)!''}">
							</div>
						</div>
					</div>
				</div>
				<div class="col-md-6">
					<div class="form-xs form-group row">
						<label class="col-xs-2 control-label">户籍地址： </label>
						<div class="col-xs-10">
							<div class="col-xs-12">
								<input id="censusRegisterAddress" class="form-control input-xs customer" name="censusRegisterAddress"
									type="text" value="${(customerModel.censusRegisterAddress)!''}">
							</div>
						</div>
					</div>
				</div>
			</div>
			<!-- 第六行 -->
			<div class="row">
				<div class="col-md-6">
					<div class="form-xs form-group row">
						<label class="col-xs-3 control-label">工作单位： </label>
						<div class="col-xs-9">
							<div class="col-xs-12">
								<input id="company" class="form-control input-xs customer" name="company"
									type="text" value="${(customerModel.company)!''}">
							</div>
						</div>
					</div>
				</div>
				<div class="col-md-6">
					<div class="form-xs form-group row">
						<label class="col-xs-2 control-label">单位地址： </label>
						<div class="col-xs-10">
							<div class="col-xs-12">
								<input id="companyAddress" class="form-control input-xs customer" name="companyAddress"
									type="text" value="${(customerModel.companyAddress)!''}">
							</div>
						</div>
					</div>
				</div>
			</div>
			<!-- 第六行 -->
			<div class="row">
				<div class="col-md-12">
					<div class="form-xs form-group row">
						<label class="col-xs-1 control-label">备注：</label>
						<div class="col-xs-11">
							<textarea id="remark" name="remark" class="customer" rows="3" cols="124" maxlength="83" style="resize: none;" >${(customerModel.remark)!''}</textarea>
						</div>
					</div>
				</div>
			</div>
			
		</div>
	</div>
</div>

<input id="isStaff_Check"  type="hidden" value="${(customerModel.isStaff)!''}"/>
<input id="userType_Radio"  type="hidden" value="${(customerModel.userType)!''}"/>
<input id="sex_Radio"  type="hidden" value="${(customerModel.sex)!''}"/>
<input id="buyExperience_Radio"  type="hidden" value="${(customerModel.buyExperience)!''}"/>
<input id="loanRecord_Radio"  type="hidden" value="${(customerModel.loanRecord)!''}"/>
<input id="kaiShou_Radio"  type="hidden" value="${(customerModel.kaiShou)!''}"/>
<input id="viewHome_Radio"  type="hidden" value="${(customerModel.viewHome)!''}"/>
<input id="idType_Sel"  type="hidden" value="${(customerModel.idType)!''}"/>
<input id="country_Sel"  type="hidden" value="${(customerModel.country)!''}"/>

<script type="text/javascript">

$(function() {
	fillForm();
});

function fillForm(){
	//修改默认选中框
	$(":radio[name='userType'][value='" + $("#userType_Radio").val() + "']").prop("checked", "checked");
	$(":radio[name='sex'][value='" + $("#sex_Radio").val() + "']").prop("checked", "checked");
	$(":radio[name='buyExperience'][value='" + $("#buyExperience_Radio").val() + "']").prop("checked", "checked");
	$(":radio[name='loanRecord'][value='" + $("#loanRecord_Radio").val() + "']").prop("checked", "checked");
	$(":radio[name='kaiShou'][value='" + $("#kaiShou_Radio").val() + "']").prop("checked", "checked");
	$(":radio[name='viewHome'][value='" + $("#viewHome_Radio").val() + "']").prop("checked", "checked");
	$("#idType").val($("#idType_Sel").val());
	$("#country").val($("#country_Sel").val());
	
	if($("#isStaff_Check").val()==2){
		$(":checkbox[name='isStaff']").prop("checked", "checked");
	}
}

var isStaff = $("#isStaff_Check").val();
$("[id^='isStaff']").click(function() {
	if($(this).prop("checked")) {
		isStaff = 2;
	}else{
		isStaff = 1;
	}
});

function saveCustomer(type){
	var url = "${CTX}/customerManage/addCustomer.do";
	if(type == 2) {//修改
		url = "${CTX}/customerManage/updateCustomer.do?id="+$("#customerId").val();
	}
	$.ajax({
		type : "post",
		url : url,
		async :false,
		dataType :'json',
		data : {
			"id" : $("#customerId").val(),
			"tell" : $("#tel").val(),
			"userName" : $("#customerName").val(),
			"isStaff" : isStaff, 
			"userType" : $("[id^='userType']:checked").val(),
			"spareTell" : $("#spareTell").val(),
			"sex" : $("[id^='sex']:checked").val(),
			"idType" : $("#idType").val(),
			"idCode" : $("#identityCode").val(),
			"country" : $("#country").val(),
			"censusRegister" : $("#huji").val(),
			"pubFundsBlance" : $("#pubFundsBlance").val(),
			"pubFundsMonth" : $("#pubFundsMonth").val(),
			"userAge" : $("#userAge").val(),
			"buyExperience" : $("[id^='buyExperience']:checked").val(),
			"loanRecord" : $("[id^='loanRecord']:checked").val(),
			"kaiShou" : $("[id^='kaiShou']:checked").val(),
			"viewHome" : $("[id^='viewHome']:checked").val(),
			"presentAddress" : $("#presentAddress").val(),
			"censusRegisterAddress" : $("#censusRegisterAddress").val(),
			"company" : $("#company").val(),
			"companyAddress" : $("#companyAddress").val(),
			"remark" : $("#remark").val()
			},
		success : function(data){
			if(data == 1) {
				alert("保存成功");
			}else {
				alert("保存失败");
			}
		},
	 });
}

function customerCheck(){
	$.ajax({
		type : "post",
		url : "${CTX}/customerManage/customerCheck.do",
		async :false,
		dataType :'JSON',
		data : {
			"tell" : $("#tel").val()
		},
		success : function(data){
			$("#customerName").val(data.userName);
			$("#isStaff_Check").val(data.isStaff);
			$("#userType_Radio").val(data.userType);
			$("#spareTell").val(data.spareTell);
			$("#sex_Radio").val(data.sex);
			$("#idType_Sel").val(data.idType);
			$("#identityCode").val(data.idCode);
			$("#country_Sel").val(data.country);
			$("#huji").val(data.censusRegister);
			$("#pubFundsBlance").val(data.pubFundsBlance);
			$("#pubFundsMonth").val(data.pubFundsMonth);
			$("#userAge").val(data.userAge);
			$("#buyExperience_Radio").val(data.buyExperience);
			$("#loanRecord_Radio").val(data.loanRecord);
			$("#kaiShou_Radio").val(data.kaiShou);
			$("#viewHome_Radio").val(data.viewHome);
			$("#presentAddress").val(data.presentAddress);
			$("#censusRegisterAddress").val(data.censusRegisterAddress);
			$("#company").val(data.company);
			$("#companyAddress").val(data.companyAddress);
			$("#remark").val(data.remark);
			$(".customer").attr("disabled","disabled");
			fillForm();
		}
	 });
}

</script>