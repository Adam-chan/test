<form  id="updateForm">
<div class="row" style="margin:0">
<div class="col-xs-12 my-group" enterforbtn="confirm-role">
 <div id="element_id">
		<div class="form-horizontal row my-inputs">
           	<div class="col-md-12 col-sm-12">
				<div class=" form-xs form-group row " style="margin:0;margin-top: 15px">
					<label id="endReasonName" for="roleName" class="col-xs-12"></label>
					<div class="col-xs-12 " id="cloneTarget">
                        <textarea name="endReason" id ="endReason" rows="5" cols="60" maxlength="400" stringCheck="true" style="width: 100%" ></textarea>
					</div>
				</div>
           	</div>
		</div>
	</div>
</div>
</div>
<input type="hidden" name="status" value="${status!}">
<input type="hidden" name="id" value="${LimitId!}">
</form>
<script type="text/javascript">
//校验
aihome.validateendOrterm=function(){
	// 字符验证，只能包含中文、英文、数字、下划线等字符。    
     $.validator.addMethod("stringCheck", function(value, element) {       
         return this.optional(element) || /^[a-zA-Z0-9\u4e00-\u9fa5-_，。]+$/.test(value);       
    }, "只能包含中文、英文、数字、下划线 、中文逗号、句号");   
	 return $("#updateForm").validate({
			onfocusout: function(element) { 
				$(element).valid();
			},  
			rules:{  
			},
			messages:{
				endReason:{       
					required:"不能为空",
				}
			},
	        errorPlacement: function(error, element){
	            error.appendTo(element.parent());
	        }
		}); 
	
}
//终止和结束
aihome.endOrtermination=function(){
	var type = 0;
	//表单验证
	if(!aihome.validateendOrterm().form()) {
		aihome.ispan();
		alert("操作失败！")
		type = -2;
		return type;
	}
	var oForm = $('#updateForm');
	var updateForm = oForm.serialize();
	$.ajax({
	       type : "POST",
	       url : '${CTX}/manageTimeLimitExpress/updataStuts.do',
	       dataType : 'json',
	       data : updateForm,
	       async:false,
	       success : function(data) {
	    	   	type=parseInt(data);
	      }
	   });
	return type; 
}
//初始化
$(function(){
	//初始化终止页面还是结束页面
	<#if status ??> 
		<#if status == "4">
				$("#endReasonName").html("终止原因");
			<#else>
				$("#endReasonName").html("结束原因");
				$("#endReason").attr("required","true");
		</#if>
	</#if>
	//初始话校验
	aihome.validateFunction();
})
</script>