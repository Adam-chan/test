<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="matchCategory" >
  <select id="getMatchCategoryPage" parameterType="map" resultType="matchCategoryModel" >
    select "ID", "NAME", "CREATE_USER" as createUser, to_char (CREATE_TIME, 'yyyy-MM-dd') as createTimeFormat,
     (case when "STATUS" = 1 then '√'  when "STATUS" = 2 then '' end) as "STATUS",
     (case when "LAYER" = 1 then '大区'  when "LAYER" = 2 then '区'  when "LAYER" = 3 then '组' end) as "LAYER", "REMARK"
    from MATCH_CATEGORY
    <where>
    	<if test="name!=null and name !=''">
    		and NAME = #{name}
    	</if>
    	<if test="layer!=null and layer !=''">
    		and LAYER = #{layer}
    	</if>
    	<if test="status!=null and status !=''">
    		and STATUS = #{status}
    	</if>
    </where>
  </select>
  
  <select id="selectById" parameterType="map" resultType="matchCategoryModel">
  	select "NAME","SORT","LAYER","STATUS","REMARK"
  	from MATCH_CATEGORY
  	where ID = #{id}
  </select>
  
  <insert id="insertMatchCategory" parameterType="map">
  	insert into MATCH_CATEGORY(ID,NAME,STATUS,CREATE_TIME
  	<if test="createUser!=null and createUser !=''">
  	,CREATE_USER
  	</if>
  	<if test="layer!=null and layer !=''">
  	,LAYER
  	</if>
  	<if test="sort!=null and sort !=''">
  	,SORT
  	</if>
  	<if test="remark!=null and remark !=''">
  	,REMARK
  	</if>
  	<if test="createUserId!=null and createUserId !=''">
  	,CREATE_USER_ID
  	</if>
  	) values 
 	(MATCH_CATEGORY_SEQ.NEXTVAL,#{name},#{status,jdbcType=DECIMAL},SYSDATE
 	<if test="createUser!=null and createUser !=''">
 	,#{createUser}
 	</if>
 	<if test="layer!=null and layer !=''">
 	,#{layer,jdbcType=DECIMAL}
 	</if>
 	<if test="sort!=null and sort !=''">
 	,#{sort}
 	</if>
 	<if test="remark!=null and remark !=''">
 	,#{remark}
 	</if>
 	<if test="createUserId!=null and createUserId !=''">
 	,#{createUserId,jdbcType=VARCHAR}
 	</if>
 	)
  </insert>
  
  <update id="updateMatchCategory" parameterType="map">
  	update MATCH_CATEGORY set 
  	NAME = #{name},
  	STATUS = #{status},
  	CREATE_USER = #{createUser},
  	CREATE_TIME = SYSDATE,
  	LAYER = #{layer},
  	SORT = #{sort},
  	REMARK = #{remark},
  	CREATE_USER_ID = #{createUserId,jdbcType=VARCHAR}
  	where 
  	ID = #{id}
  </update>
  
  <delete id="deleteMatchCategory" parameterType="map">
  	delete from MATCH_CATEGORY where ID IN (${id})
  </delete>
</mapper>