<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="parrLook">
	
	<!-- 分页查询楼盘约带看 -->
   	<select id="getParrLookPage" parameterType="map" resultType="premisesArrangeLookModel">
		SELECT
			a.ID,
			a.CLIENT_ID as clientId,
			a.BROKER as broker,
			a.PREMISES_ID as premisesId, 
			a.CREAT_TIME as creatTime,
			a.ARRANGE_TIME as arrangeTime,
			a.LED_TIME as ledTime,
			a.STATUS,  
			a.LED_STATUS as ledStatus,
			b.NAME as premisesName
		FROM
			PREMISES_ARRANGE_LOOK a 
			left join BASE_PREMISES b on a.PREMISES_ID = b.ID
		WHERE a.STATUS = 1
			<if test="parrLookId != null  and parrLookId !=''"> 
		    	and a.id = #{parrLookId}
		    </if>
		    <if test="premisesName != null  and premisesName !=''"> 
		    	and b.NAME = #{premisesName}
		    </if>
		    <if test="ledStatus != null  and ledStatus !=''"> 
		    	and a.LED_STATUS = #{ledStatus}
		    </if>
		    <if test="startCreatTime != null and startCreatTime != ''">
	        	 and a.CREAT_TIME &gt; #{startCreatTime}
	        </if>
	        <if test="endCreatTime != null and endCreatTime != ''">
	        	and a.CREAT_TIME &lt; #{endCreatTime}
	         </if>
	         <if test="startArrangeTime != null and startArrangeTime != ''">
	        	 and a.ARRANGE_TIME &gt; #{startArrangeTime}
	        </if>
	        <if test="endArrangeTime != null and endArrangeTime != ''">
	        	and a.ARRANGE_TIME &lt; #{endArrangeTime}
	         </if>
		ORDER BY a.ID desc
   	</select>	
	  	<!-- 逻辑删除 修改 -->
   	<update id="updateParrLook" parameterType="map">             
	     UPDATE PREMISES_ARRANGE_LOOK  
	      	<set>
				<if test="clientId != null and clientId != ''">
					 CLIENT_ID = #{clientId},
				</if>
				<if test="broker != null and broker != ''">
					 BROKER = #{broker},
				</if>
				<if test="premisesId != null and premisesId != ''">
					 PREMISES_ID = #{premisesId},
				</if>
				<if test="creatTime != null and creatTime != ''">
					 CREAT_TIME = #{creatTime},
				</if>
				<if test="arrangeTime != null and arrangeTime != ''">
					 ARRANGE_TIME = #{arrangeTime},
				</if>
				<if test="ledTime != null and ledTime != ''">
					 LED_TIME = #{ledTime}
				</if>
				<if test="status != null and status != ''">
					 STATUS = #{status}
				</if>
				<if test="ledStatus != null and ledStatus != ''">
					 LED_STATUS = #{ledStatus}
				</if>
	      	</set>
      	<where>
	     	<if test="parrLookId != null  and parrLookId !=''"> 
		     	id=#{parrLookId}
		    </if>
	    </where>
	</update>  
</mapper>