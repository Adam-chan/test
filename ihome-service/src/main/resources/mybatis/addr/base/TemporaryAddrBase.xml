<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="addressBaseManage">
  	<!-- 临时地址库分页列表 -->
	<select id="getTemAddrBasePage" parameterType="map"  resultType="temporaryAddrBaseModel">
		SELECT
			ID as id,
			BIZ_TYPE as bizType,
			TEMPORARY_ADDTR as temporaryAddtr,
			SUBMITTER as submitter,
			SUBMITTER_TIME as submitterTime,
			CHECK_STATUS as checkStatus,
			CHECK_MAN as checkMan,  
			CHECK_TIME as checkTime,
			REFUSE_RESON as refuseReson,
			HOUSE_INFO_ID as houseInfoId,
			HOUSE_ADDR as houseAddr
		FROM  TEMPORARY_ADDR_BASE
		<where>
			<if test="checkStatus != null  and checkStatus !=''"> 
		     	CHECK_STATUS = #{checkStatus}
		    </if>
		    <if test="keyWord != null  and keyWord !=''"> 
		     	AND TEMPORARY_ADDTR = #{keyWord}
		    </if>
		    <if test="keyWordName != null  and keyWordName !=''"> 
		     	AND BIZ_TYPE = #{keyWordName}
		    </if>
		</where>
		order by ID desc
		
	 </select>
	 
	  	  <!-- 模糊查询临时地址 -->
	<select id="getTemAddrkeyWordByMatch" resultType="temporaryAddrBaseModel">
		SELECT
			ID as id,
			BIZ_TYPE as bizType,
			TEMPORARY_ADDTR as temporaryAddtr
		FROM  TEMPORARY_ADDR_BASE
		<where>
			<if test="matchStr != null  and matchStr !=''"> 
		     	INSTR(TEMPORARY_ADDTR, #{matchStr}) > 0
		    </if>
		</where>
   	</select>
   	
   		<!-- 临时地址库审核 -->
	  <update id="updateHouseAddr" parameterType="map" >
	    	update TEMPORARY_ADDR_BASE
	    <set>
	      <if test="houseAddr != null and houseAddr !='' " >
	       		HOUSE_ADDR = #{houseAddr},
	      </if>
	      <if test="checkTime != null and checkTime !='' " >
	       		CHECK_TIME = #{checkTime},
	      </if>
	       <if test="checkStatus != null and checkStatus !='' " >
	       		CHECK_STATUS = #{checkStatus},
	      </if>
	      <if test="checkMan != null and checkMan !='' " >
	       		CHECK_MAN = #{checkMan},
	      </if>
	      <if test="refuseReson != null and refuseReson !=''  " >
	       		REFUSE_RESON = #{refuseReson}
	      </if>
	    </set>
	    where ID = #{temAddrBaseId}
	  </update>
</mapper>