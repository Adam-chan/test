<form action="" id="saveForm">
<div class="row" style="margin:0">
	<div class="col-xs-12 my-group" enterforbtn="confirm-role">
 		<div id="element_id" style="border-bottom:1px solid #333333 ">
			<div class="form-horizontal row my-inputs">
	           <div class="col-md-4 col-sm-4 col-xs-4" >
					<div class=" form-xs form-group row">
						<label for="userName" class="col-md-5 col-sm-5 col-xs-5 control-label">楼盘名称：</label>
						<div class="col-md-7 col-sm-7 col-xs-7">
							${premisesName!}
						</div>
					</div>
           		</div>
   				<div class="col-md-4 col-sm-4 col-xs-4" >
					<div class=" form-xs form-group row">
						<label for="userName" class="col-md-5 col-sm-5 col-xs-5 control-label">楼栋分组：</label>
						<div class="col-md-7 col-sm-7 col-xs-7">
							<select name="buildingGroupId" id="buildingGroupId2" class=" input-xs isFlag">
												<option  selected="selected" value="">请选择</option>
												<#if groupList??>
													<#list groupList as item>
														<#if building.buildingGroupId??>
															<#if item.id == building.buildingGroupId>
																	<option selected="selected" value="${item.id!}">${item.groupName!}</option>
																<#else>
																	<option value="${item.id!}">${item.groupName!}</option>
															</#if>
															<#else>
																<option value="${item.id!}">${item.groupName!}</option>
														</#if>		
													</#list>
												</#if>	
							</select>
						</div>
					</div>
           		</div>
           		<div class="col-md-4 col-sm-4 col-xs-4" >
					<div class=" form-xs form-group row">
						<label for="userName" class="col-md-5 col-sm-5 col-xs-5 control-label">栋座：</label>
						<div class="col-md-6 col-sm-6 col-xs-6">
						<input class="isFlag" name="buildingName" type="text" value="${building.buildingName}" required="required" maxlength="10">
						<input name="baseBuildingId" type="hidden" value="${building.id}"  >
						</div>
					</div>
           		</div>
			</div>
		</div>
	</div>
	<div class="col-xs-12 my-group" enterforbtn="confirm-role">
 	 		<div id="element_id" >
			<div class="form-horizontal row my-inputs">
	           <div class="col-md-6 col-sm-6 col-xs-6" >
					<div class=" form-xs form-group row">
						<label for="userName" class="col-md-5 col-sm-5 col-xs-5 control-label">建筑年代：</label>
						<select name="buildingYear" id="buildingYear" class=" input-xs  isFlag" >
										<option selected="selected" value="">请选择</option>
						</select>
					</div>
           		</div>
   				<div class="col-md-6 col-sm-6 col-xs-6" >
					<div class=" form-xs form-group row">
						<label for="userName" class="col-md-5 col-sm-5 col-xs-5 control-label">单元总数：</label>
						<input class="isFlag" type="text" value="${building.unitNum!}" disabled="disabled"   maxlength="10">
					</div>
           		</div>
           		
			</div>
		</div>
	</div>
	<div class="col-xs-12 my-group" enterforbtn="confirm-role">
 		<div id="element_id" >
			<div class="form-horizontal row my-inputs">
	           <div class="col-md-6 col-sm-6 col-xs-6" >
					<div class=" form-xs form-group row">
						<label for="userName" class="col-md-5 col-sm-5 col-xs-5 control-label">房屋用途：</label>
						<select name="purpose" id="purpose2" class=" input-xs  isFlag" >
							<option selected="selected" value="">请选择</option>
							<#if building.purpose??>
								<option value="1" <#if building.purpose == 1>selected="selected"</#if> >住宅</option>
								<option value="2" <#if building.purpose == 2>selected="selected"</#if> >商业</option>
								<option value="3" <#if building.purpose == 3>selected="selected"</#if> >写字楼</option>
								<option value="4" <#if building.purpose == 4>selected="selected"</#if> >商住两用</option>
								<#else>
								<option value="1" >住宅</option>
								<option value="2">商业</option>
								<option value="3">写字楼</option>
								<option value="4">商住两用</option>
							</#if> 
						</select>
					</div>
           		</div>
   				<div class="col-md-6 col-sm-6 col-xs-6" >
					<div class=" form-xs form-group row">
						<label for="userName" class="col-md-5 col-sm-5 col-xs-5 control-label">土地使用年限：</label>
						<select name="landLimit" id="landLimit" class=" input-xs  isFlag" >
								<option   selected="selected" value="">请选择</option>
								<!-- landLimit -->
							<#if building.landLimit??>
								<option value="1" <#if building.landLimit==1> selected="selected"</#if>>70年</option>
								<option value="2" <#if building.landLimit==2> selected="selected"</#if>>60年</option>
								<option value="3" <#if building.landLimit==3> selected="selected"</#if>>50年</option>
								<option value="4" <#if building.landLimit==4> selected="selected"</#if>>40年</option>
								<#else>
								<option   value="1">70年代</option>
								<option   value="2">60年代</option>
								<option   value="3">50年代</option>
								<option   value="4">40年代</option>
							</#if>
						</select>
					</div>
           		</div>
           		
			</div>
		</div>
	</div>
	<div class="col-xs-12 my-group" enterforbtn="confirm-role">
		<div id="element_id" >
			<div class="form-horizontal row my-inputs">
	           <div class="col-md-6 col-sm-6 col-xs-6" >
					<div class=" form-xs form-group row">
						<label for="userName" class="col-md-5 col-sm-5 col-xs-5 control-label">建筑结构：</label>
						<select name="buildingConst" id="buildingConst2" class=" input-xs  isFlag">
										<option selected="selected" value="">请选择</option>
										<#if building.buildingConst??>
												<option   value="1"  <#if building.buildingConst==1> selected="selected"</#if>>框架结构</option>
												<option   value="2"  <#if building.buildingConst==2> selected="selected"</#if>>剪力结构</option>
												<option   value="3"  <#if building.buildingConst==3> selected="selected"</#if>>框架剪力结构</option>
												<option   value="4"  <#if building.buildingConst==4> selected="selected"</#if>>筒体结构</option>
												<option   value="5"  <#if building.buildingConst==5> selected="selected"</#if>>筒中筒结构</option>
												<option   value="6"  <#if building.buildingConst==6> selected="selected"</#if>>砖混结构</option>
												<option   value="7"  <#if building.buildingConst==7> selected="selected"</#if>>板柱结构</option>
												<option   value="8"  <#if building.buildingConst==8> selected="selected"</#if>>砌体结构</option>
												<option   value="9"  <#if building.buildingConst==9> selected="selected"</#if>>钢筋混凝土结构</option>
												<option   value="10" <#if building.buildingConst==10> selected="selected"</#if>>钢结构</option>
												<option   value="11" <#if building.buildingConst==11> selected="selected"</#if>>木结构</option>
											<#else>
												<option   value="1">框架结构</option>
												<option   value="2">剪力结构</option>
												<option   value="3">框架剪力结构</option>
												<option   value="4">筒体结构</option>
												<option   value="5">筒中筒结构</option>
												<option   value="6">砖混结构</option>
												<option   value="7">板柱结构</option>
												<option   value="8">砌体结构</option>
												<option   value="9">钢筋混凝土结构</option>
												<option   value="10">钢结构</option>
												<option   value="11">木结构</option>
										</#if>
										
									</select>
					</div>
           		</div>
   				<div class="col-md-6 col-sm-6 col-xs-6" >
					<div class=" form-xs form-group row">
						<label for="userName" class="col-md-5 col-sm-5 col-xs-5 control-label">建筑类型：</label>
						<select name="buildingType" id="buildingType2" class=" input-xs  isFlag">
							<option selected="selected" value="">请选择</option>
							<#if building.buildingType??>
								<option <#if building.buildingType ==1>selected="selected"</#if>  value="1">超高层（40层以上）</option>
								<option <#if building.buildingType ==2>selected="selected"</#if>  value="2">高层（10层以上）</option>
								<option <#if building.buildingType ==3>selected="selected"</#if>  value="3">小高层（8-11层）</option>
								<option <#if building.buildingType ==4>selected="selected"</#if>  value="4">中高层（7-9层）</option>
								<option <#if building.buildingType ==5>selected="selected"</#if>  value="5">底层（1-3层）</option>
								<option <#if building.buildingType ==6>selected="selected"</#if>  value="6">多层复式</option>
								<option <#if building.buildingType ==7>selected="selected"</#if>  value="7">高层复式</option>
								<option <#if building.buildingType ==8>selected="selected"</#if>  value="8">多层跃式</option>
								<option <#if building.buildingType ==9>selected="selected"</#if>  value="9">高层跃式</option>
								<option <#if building.buildingType ==10>selected="selected"</#if>  value="10">空中别墅</option>
								<option <#if building.buildingType ==11>selected="selected"</#if>  value="11">独栋别墅</option>
								<option <#if building.buildingType ==12>selected="selected"</#if>  value="12">联排别墅</option>
								<option <#if building.buildingType ==13>selected="selected"</#if>  value="13">双拼别墅</option>
								<option <#if building.buildingType ==14>selected="selected"</#if>  value="14">叠拼别墅</option>
								<option <#if building.buildingType ==15>selected="selected"</#if>  value="15">花园洋房</option>
								<option <#if building.buildingType ==16>selected="selected"</#if>  value="16">其他</option>
								<#else>
								<option selected="selected" value="">请选择</option>
								<option   value="1">超高层（40层以上）</option>
								<option   value="2">高层（10层以上）</option>
								<option   value="3">小高层（8-11层）</option>
								<option   value="4">中高层（7-9层）</option>
								<option   value="5">底层（1-3层）</option>
								<option   value="6">多层复式</option>
								<option   value="7">高层复式</option>
								<option   value="8">多层跃式</option>
								<option   value="9">高层跃式</option>
								<option   value="10">空中别墅</option>
								<option   value="11">独栋别墅</option>
								<option   value="12">联排别墅</option>
								<option   value="13">双拼别墅</option>
								<option   value="14">叠拼别墅</option>
								<option   value="15">花园洋房</option>
								<option   value="16">其他</option>
							</#if>
						</select>
					</div>
           		</div>
           		
			</div>
		</div>
	</div>
</div>
<input type="hidden" value="${premisesId}" name="premisesId">
</form>
<style type="text/css">
.isFlag{width: 120px;}
</style>
<script type="text/javascript">
aihome.validateFunction=function(){
	 return $("#saveForm").validate({
			onfocusout: function(element) { $(element).valid(); },  
			rules:{  
			},
			messages:{
				buildingName:{       
					required:"不能为空"
				},
			},
	        errorPlacement: function(error, element){
	            error.appendTo(element.parent());
	        }
		}); 
}
$(function(){
	//建筑年代下拉赋值
	var myDate= new Date(); 
	var startYear=myDate.getFullYear()-65;//起始年份 
	var endYear=myDate.getFullYear()+65;//结束年份 
	var obj=document.getElementById('buildingYear'); 
	for (var i=startYear;i<=endYear;i++) 
	{ 
		obj.options.add(new Option(i,i)); 
	}
	<#if building.buildingYea?? >
		$("#buildingYear").val(${building.buildingYea});
		<#else>
		obj.options[obj.options.length-66].selected=1;
	</#if>
		aihome.validateFunction();
});

aihome.updateBaseBuilding=function(){
	if(!aihome.validateFunction().form()) {
		return false;
	}
	// 获取表单
	var type =0;
	var oForm = $('#saveForm');
	var saveForm = oForm.serialize();
	$.ajax({
	       type : "POST",
	       url : '${CTX}/baseBuilding/updateBuilding.do',
	       dataType : 'json',
	       data : saveForm,
	       async:false,
	       success : function(data) {
	    	   	type= data;
	      }
	});
	if(type>0){
		alert("修改成功")
	} else if(type-1){
		alert("栋座名已存在")
	} 
	return type
}
</script>