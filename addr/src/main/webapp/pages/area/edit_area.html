<div class="col-xs-12 my-group" enterforbtn="confirm-role">
	<div id="element_id">
	 	<form id="testForm"  >
			<div class="form-horizontal row my-inputs">
			<input type="hidden" id="different" value="${different!}"/>
			<input type="hidden" id="rowId" value="${rowId!''}"/>
				<div class="col-md-12 col-sm-6">
					<#if different="2">
						<div class=" form-xs form-group row">
							<label for="userName" class="col-xs-3 control-label" value="">所在市名称：</label>
							<div class="col-xs-6">
								<input class="province input-xs form-control" value="${unifyStr!}" readonly="true"></input>
							</div>
						</div>
					<#elseif different="3">
						<div class=" form-xs form-group row">
							<label for="userName" class="col-xs-3 control-label" value="">所在区名称：</label>
							<div class="col-xs-6">
								<input class="province input-xs form-control" value="${unifyStr!}" readonly="true"></input> 
							</div>
						</div>
					<#else>
						<div class=" form-xs form-group row">
							<label for="userName" class="col-xs-3 control-label" value="">所在街道名称：</label>
							<div class="col-xs-6">
								<input class="province input-xs form-control" value="${unifyStr!}" readonly="true"></input> 
							</div>
						</div>	
					</#if>
	           	</div>
				<div class="col-md-12 col-sm-6" id="clonePlace">
				<#if different="2">
					<div class=" form-xs form-group row" id="cloneTarget">
						<label for="userName" class="col-xs-3 control-label" value="">区名称：</label>
						<div class="col-xs-6" >
							<input id="areaName" value="${(result.name)!}" old-data="${(result.name)!}" onKeypress="javascript:if(event.keyCode == 32)event.returnValue = false;" name="areaName" maxlength="15" vRequired="true" type="text" class="form-control input-xs" placeholder="必填项"/>
						</div>
					</div>
	           		<div class=" form-xs form-group row" id="cloneTarget">
						<label for="userName" class="col-xs-3 control-label" value="">区编号：</label>
						<div class="col-xs-6" >
						<input old-data="${(result.areaCode)!''}" id="areaCode" value="${(result.areaCode)!''}" vRequired="true" type="text" class="form-control input-xs" placeholder="必填项"/>
						</div>
					</div>
				<#elseif different="3">
					<div class=" form-xs form-group row" id="cloneTarget">
						<label for="userName" class="col-xs-3 control-label" value="">街道名称：</label>
						<div class="col-xs-6" >
							<input id="subdistrictName" value="${(result.name)!}" old-data="${(result.name)!}" onKeypress="javascript:if(event.keyCode == 32)event.returnValue = false;" name="areaName" maxlength="15" vRequired="true" type="text" class="form-control input-xs" placeholder="必填项"/>
						</div>
					</div>
				<#else >
					<div class=" form-xs form-group row" id="cloneTarget">
						<label for="userName" class="col-xs-3 control-label" value="">社区名称：</label>
						 <div class="col-xs-6" >
							<input id="communityName" value="${(result.name)!}" old-data="${(result.name)!}"  onKeypress="javascript:if(event.keyCode == 32)event.returnValue = false;" name="areaName" maxlength="15" vRequired="true" type="text" class="form-control input-xs" placeholder="必填项"/>
						</div>
					</div>
				</#if>
	           	</div>
	           	<div class="col-md-12 col-sm-6">
	           		<div class=" form-xs form-group row" id="cloneTarget">
						<label for="userName" class="col-xs-3 control-label" value="">排序号：</label>
						<div class="col-xs-6" >
						<#if result??>
							<input id="sort" value="${result.sort!}" name="subdistrictName" vRequired="true" type="text" class="form-control input-xs" placeholder="必填项"/>
						<#else>
							<input id="sort" value="" onkeyup="this.value=this.value.replace(/[^0-9]/g,'')" onafterpaste="this.value=this.value.replace(/[^0-9]/g,'')" name="subdistrictName" maxlength="10" vRequired="true" type="text" class="form-control input-xs" placeholder="必填项"/>
						</#if>
						</div>
					</div>
	           	</div>
	          
	           	<div class="col-md-12 col-sm-6">
					<div class=" form-xs form-group row" id="cloneTarget">
						<label for="userName" class="col-xs-3 control-label" value="">是否外网显示：</label>
						<div class="col-xs-6">
							<#if result??>
							<input name="radioName" type="radio"  value="1" />是
							<input name="radioName" type="radio" value="2"/>否
							<#else>
							<input name="radioName" type="radio" checked  value="1" />是
							<input name="radioName" type="radio" value="2"/>否
							</#if>
						</div>
					</div>
				</div>
				 <div class="col-md-12 col-sm-6">
					<div class=" form-xs form-group row" id="cloneTarget">
						<label for="userName" class="col-xs-3 control-label" value="">备注：</label>
						<div class="col-xs-6">
						<#if result??>
							<textarea id="remarkText" cols="35" rows="3"  name="textareaName" type="textarea" value="${result.remark!}">${result.remark!}</textarea>
						<#else>  
							<textarea id="remarkText" cols="35" rows="3"  name="textareaName" type="textarea" value=""></textarea>
						</#if>
						</div>
					</div>
				</div>
			</div>
		</form>
	</div>
</div>
<#if result??>
<input  id="radioVal"  type="hidden" value="${result.showStatus!}"/>
<input type="hidden" id="condition" value=""/>
</#if>
<script type="text/javascript">
	$(":radio[name='radioName'][value='" + $("#radioVal").val() + "']").prop("checked", "checked");
	//新增 修改Btn
    function judgeInput(){
    	var	areaCode="";
    	var	valueStr="";
    	var result = false;
    	if($("#rowId").val()==""){//新增
    		if($("#areaName").val()==""||$("#subdistrictName").val()==""||$("#communityName").val()==""||$("#sort").val()==""||$("#areaCode").val()==""){
        		alert("请填写未填内容！");
        		return false; 
        	}
    		if($("input[name='areaName']").val()!=""){
       		 $.ajax({
       	   	       type: "post",
       	   	       url: "${CTX}/area/verifyAddArea.do", 
       	   	       async:false,
       	   	       dataType:'json',
       	   	       data: {"areaName" : $("input[name='areaName']").val(),
       					 "baseAreaPId":${baseAreaId!},
       						 "areaLevel":${different},
       						 "areaCode":$("#areaCode").val()
       					},
       	   	       success: function(data){
       	   	    		if (data == 1) {
       						alert("该名字已存在,请重新输入!");
       	 				}else if(data == 4){
       	 					alert("该编号已存在!");
       	 				}else{
       	 					result =  true;
       	 				}
       	   	       },
       	   	 	});
   			};
   			if(!result){
   	   			return result;
   	   		}
    	}else{//修改
    		if($("input[name='areaName']").val()!=""){//验证名字
    			if($("input[name='areaName']").val()!=$("input[name='areaName']").attr("old-data")){
    				 $.ajax({
            	   	       type: "post",
            	   	       url: "${CTX}/area/verifyAddArea.do",
            	   	       async:false,
            	   	       dataType:'json',
            	   	       data: {"areaName" : $("input[name='areaName']").val(),
            					  "baseAreaPId":${baseAreaId!},
            					  "areaLevel":${different}
            					  
            				},
            	   	       success: function(data){
            	   	    		if (data == 1) {
            						alert("该名字已存在,请输入其他名称!");
            	 				}else {
            	 					result =  true;
            	 				}
            	   	       },
            	   	     
            	   	 	});
    			}else{
    				result = true;
    			}
      		}else{
      			result = true;
      		}
    		if(!result){
   	   			return result;
   	   		}
    		result = false;
    		debugger
    		if($("#areaCode").val()!=""){//验证编号
    			if($("#areaCode").val()!=$("#areaCode").attr("old-data")){
    				 $.ajax({
          	   	       type: "post",
          	   	       url: "${CTX}/area/verifyAddArea.do", 
          	   	       async:false,
          	   	       dataType:'json',
          	   	       data: {
          					  "baseAreaPId":${baseAreaId!},
          					  "areaLevel":${different},
          					  "areaCode":$("#areaCode").val()
          					},
          	   	       success: function(data){
          	   	    		if(data == 4){
          	 					alert("该编号已存在,请输入其他区编号!");
          	 				}else{
          	 					result =  true;
          	 				}
          	   	       },
          	   	 	});
    			}else{
    				result = true;
    			}
    		}
   			if(!result){
   	   			return result;
   	   		}
    	}
    	if($("#different").val()==2){
    		if($("#areaName").val()==""){
    			valueStr = $("#areaName").attr("old-data");
    		}else{
    			valueStr = $("#areaName").val();
    		}
    		if($("#areaCode").val()==""){
    			areaCode = $("#areaCode").attr("old-data");
    		}else{
    			areaCode =$("#areaCode").val();
    		}
    	}else if($("#different").val()==3){
    		if($("#subdistrictName").val()==""){
    			valueStr = $("#subdistrictName").attr("old-data");
    		}else{
    			valueStr = $("#subdistrictName").val();
    		}
    	}else{
    		if($("#communityName").val()==""){
    			valueStr = $("#communityName").attr("old-data");
    		}else{
    			valueStr = $("#communityName").val();
    		}
    	}
       	 $.ajax({
     	       type: "post",
     	       url: "${CTX}/area/addArea.do", 
     	       async:false,
     	       dataType:'json',
     	       data: {"areaName":valueStr,"baseAreaPid":${baseAreaId!},"sort":$("#sort").val(),"showStatus":$('input[name="radioName"]:checked').val(),"remarkText":$("#remarkText").val(),"areaLevel":${different!},"allArea":"${areaAll!}","rowId":$("#rowId").val(),"areaCode":areaCode},
     	       success: function(data){
     	    	  if(data == 1){
		    		   alert("操作成功");
		    	   }else{
		    		   alert("操作失败");
		    	   }
     	       },
     	 });
       	 return true;
     }
</script>
