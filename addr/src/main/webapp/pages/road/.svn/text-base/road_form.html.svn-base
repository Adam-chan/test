<form id="roadForm">
  <div class="modal-body form-horizontal row">
    <div class="col-sm-12">
      <div class=" form-xs form-group row">
         <label for="addGrade" class="col-xs-3 control-label">道路名称</label>
         <div class="col-xs-7">
         	<input type="hidden" class="form-control input-xs" id="id" name="id" value="${(road.id)!''}" /> 
            <input id="road_name" type="text" class="form-control input-xs" name="roadName" maxlength="16" value="${(road.roadName)!''}" vRequired="true" placeholder="道路名称">
         </div>
       </div>
    </div>
  </div>
</form>

<script type="text/javascript">
	$("#roadForm").validationEngine('attach',{
		promptPosition: 'bottomRight',
      	validationEventTrigger:"blur"
	});
	$("#road_name").blur(function(){
		var roadName = $.trim($("#road_name").val());
		var roadId = $("#id").val();
		if(roadName!=""){
			$.ajax({
	    		url: "${CTX}/road/getRoadByNameIs.do",
	    		data:{
	    			roadName:roadName,
	    			roadId:roadId
	    		},
	    		type:"post",
				dataType:"json",
	    		success:function(data){
	    			if(data==1){
	    				alert("该道路名称已存在！");
	    				$("#road_name").val("");
	    			}
	    		}
	    	});
		}
	});
</script>


