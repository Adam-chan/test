<div class="modal-body form-horizontal row">
	<div class="ba_div col-xs-12 form-xs form-group row">
		<div class="col-xs-6">
			<label class="col-xs-3 control-label">行政区域：</label>
			<div class="col-xs-4">
				<select id="p_baseArea" class="input-xs form-control searchKey">
	    		<#if (areaList?size>0)> 
					<#list areaList as item>
						<option value="${(item.id)!''}">${(item.name)!''}</option>
					</#list>
				<#else>
				    <option value="">请选择</option>
				</#if>
				</select>
			</div>
		</div>
		<div class="col-xs-6">
			<label class="col-xs-2 control-label">商圈：</label>
			<div class="col-xs-4">
				<select id="p_ba1" class="input-xs form-control searchKey">
					<option value="">请选择</option>
				</select>
			</div>
			<div class="col-xs-4">
				<select id="p_ba2" class="input-xs form-control searchKey">
					<option value="">请选择</option>
				</select>
			</div>
		</div>
	</div>
	<div class="ba_div col-xs-12 form-xs form-group row">
		<div class="col-xs-6" style="left:5%">
			<div class="col-xs-4">
				<select id="p_subdistrict" class="input-xs form-control searchKey">
					<option value="">请选择街道</option>
				</select>
			</div>
			<div class="col-xs-4">
				<select id="p_community" class="input-xs form-control searchKey">
					<option value="">请选择社区</option>
				</select>
			</div>
			<div class="col-xs-4">
				<select id="p_road" class="input-xs form-control searchKey">
					<option value="">请选择道路</option>
				</select>
			</div>
		</div>
		<div class="col-xs-6">
			<label class="col-xs-2 control-label">号段：</label>
			<div class="col-xs-6">
				<div class="input-group">
	              <input id="p_startNum" type="text" class="form-control input-xs searchKey" onkeyup="value=value.replace(/\D/g,'')"/>
	                  <span class="input-group-addon addon-xs" style="width: 15px !important;">-</span>
	              <input id="p_ndNum" type="text" class="form-control input-xs searchKey" onkeyup="value=value.replace(/\D/g,'')">
	            </div>
            </div>
			<div class="col-xs-2" onclick="aihome.p_query();">
				<button class="btn btn-xs btn-blue ladda-button">查询</button>
			</div>
		</div>
	</div>
	<div class="col-xs-12">
		<table id="p_jqGrid" >
				
		</table>
		<div id="p_jqGridPager"></div>
	</div>
</div>
<!-- 隐藏域 S -->
<!-- 隐藏域 E -->

<script type="text/javascript">

	/**页面初始化*/
	aihome.init_add_premises_form = function(){
		//初始化搜索条件
		var areaId = $("#p_baseArea").val();
		if(areaId!=""){
			aihome.area_getBa1(areaId);
			aihome.area_getSubdistrict(areaId);
			aihome.p_getRoadList();
		}
	    //初始化列表
		$("#p_jqGrid").jqGrid({
			 url: "${CTX}/operate/getPremisesAddrForPage.do",
			 postData: {
				 "p_baseArea":$("#p_baseArea").val()
			 },
	         datatype: "json", 
	         colModel: [
				 { label: 'premisesId', name: 'premisesId',hidden:true},
	             { label: '区', name: 'baseAreaName',sortable : false,width: 30 },
				 { label: '街道', name: 'subdistrictName',sortable : false,width: 30 },
				 { label: '社区', name: 'communityName',sortable : false,width: 30 },
				 { label: '道路', name: 'roadName',sortable : false,width: 30 },
				 { label: '楼盘名称', name: 'premisesName',sortable : false,width: 30 }
	         ],
	         onSelectRow: function (rowId, status, e) {
	         	/*  rowDataNames = [];
	             var rowIds = $("#line_jqGrid").jqGrid('getGridParam', 'selarrrow');
	             $(rowIds).each(function(i,rowId){
	                 rowDataNames.push($("#line_jqGrid").jqGrid('getRowData',rowId));
	             }); */
	         },
	         multiselect: true,
	         multiboxonly: true,
	         viewrecords: true, 
	         autowidth:true,
	         height: $(window).height()*0.4,
	         rowNum:20, 
		     rowList:[10,20,30,50,100],
	         pager: "#p_jqGridPager",
	     	 jsonReader: { root: 'pagerResults', page:'currentPage',rows:'rowCount',total:'pageCount',records:'totalCount',repeatitems: false} 
	    });
	}
	/**行政区-大商圈 级联*/
	aihome.area_getBa1 = function(areaId){
		$("#p_ba1").children().remove();
		$("#p_ba2").children().remove();
		$("#p_ba1").append("<option value=''>请选择</option>");
		$("#p_ba2").append("<option value=''>请选择</option>");
		if(areaId!=""){
			$.ajax({
				url : "${CTX}/operate/getBa1List.do",
				dataType : "json",
				type : "post",
				data : {
					"areaId" : areaId
				},
				success : function(data) {
					var html = "";
					if(data.length>0){
						for(var i=0;i<data.length;i++){
							html+="<option value='"+data[i].id+"'>"+data[i].busiAreaName+"</option>";
						}
					}
					$("#p_ba1").append(html);
				}
			});
		}
	}
	/**行政区-街道 级联*/
	aihome.area_getSubdistrict = function(areaId){
		$("#p_subdistrict").children().remove();
		$("#p_community").children().remove();
		$("#p_subdistrict").append("<option value=''>请选择</option>");
		$("#p_community").append("<option value=''>请选择</option>");
		if(areaId!=""){
			$.ajax({
				url : "${CTX}/operate/getSubdistrictList.do",
				dataType : "json",
				type : "post",
				data : {
					"areaId" : areaId
				},
				success : function(data) {
					var html = "";
					if(data.length>0){
						for(var i=0;i<data.length;i++){
							html+="<option value='"+data[i].id+"'>"+data[i].name+"</option>";
						}
					}
					$("#p_subdistrict").append(html);
				}
			});
		}
	}
	/**大商圈-小商圈 级联*/
	aihome.ba1_getBa2 = function(ba1Id){
		$("#p_ba2").children().remove();
		$("#p_ba2").append("<option value=''>请选择</option>");
		if(ba1Id!=""){
			$.ajax({
				url : "${CTX}/operate/getBa2List.do",
				dataType : "json",
				type : "post",
				data : {
					"busiAreaParentId" : ba1Id
				},
				success : function(data) {
					var html = "";
					if(data.length>0){
						for(var i=0;i<data.length;i++){
							html+="<option value='"+data[i].id+"'>"+data[i].busiAreaName+"</option>";
						}
					}
					$("#p_ba2").append(html);
				}
			});
		}
	}
	/**街道-社区 级联*/
	aihome.sub_getCommunity = function(subId){
		$("#p_community").children().remove();
		$("#p_community").append("<option value=''>请选择</option>");
		if(ba1Id!=""){
			$.ajax({
				url : "${CTX}/operate/getCommunityList.do",
				dataType : "json",
				type : "post",
				data : {
					"subdistrictId" : subId
				},
				success : function(data) {
					var html = "";
					if(data.length>0){
						for(var i=0;i<data.length;i++){
							html+="<option value='"+data[i].id+"'>"+data[i].name+"</option>";
						}
					}
					$("#p_community").append(html);
				}
			});
		}
	}
	aihome.p_getRoadList = function(){
		$.ajax({
			url : "${CTX}/operate/getRoadList.do",
			dataType : "json",
			type : "post",
			success : function(data) {
				var html = "";
				if(data.length>0){
					for(var i=0;i<data.length;i++){
						html+="<option value='"+data[i].id+"'>"+data[i].roadName+"</option>";
					}
				}
				$("#p_road").append(html);
			}
		});
	}
	/**查询*/
	aihome.p_query = function(){
		var param = getSearchParam();
	 	$("#p_jqGrid").setGridParam({url:"${CTX}/operate/getPremisesAddrForPage.do?"+param,page:1}).trigger('reloadGrid');
	}
	
	$(function(){
		
		aihome.init_add_premises_form();
		
		/**change行政区划*/
		$("#p_baseArea").change(function(){
			var areaId = $(this).val();
			if(areaId!=""){
				aihome.area_getBa1(areaId);
				aihome.area_getSubdistrict(areaId);
			}
		});
		
		/**change大商圈*/
		$("#p_ba1").change(function(){
			var ba1Id = $(this).val();
			aihome.ba1_getBa2(ba1Id);
		});
	});
	
</script>