<div class="tableContent" >
 	<div class="row">
 	<!-- 省事下拉	 -->
		<div class="col-md-3 col-sm-3 col-xs-3" style="display: none;">
				<div class=" form-xs form-group row">
					<label for="userName" class="col-md-4 col-sm-4 col-xs-4 control-label">省份：</label>
					<div class="col-md-8 col-sm-8 col-xs-8">
						<select id="province" class="province input-xs " data-value="浙江省">
							<option value="">请选择省</option>
							<#list provinceList as item>
								<option value="${item.id!}">${item.name!}</option>
								
							</#list>
						</select>
					</div>
				</div>
           	</div>
	      <!--  	 市下拉 -->
		<div class="col-md-2 col-sm-6" style="display:none ;">
				<div class=" form-xs form-group row">
					<label for="roleName" class="col-xs-4 control-label">市：</label>
					<div class="col-xs-8">
						<select id="city" class="city input-xs ">
						<option value="">请选择市</option>
						</select>
					</div>
				</div>
           	</div>
	    <div class="col-xs-12">
		    <table id="roadNum_jqGrid">
				
			</table>
		<div id="jqGridPager"></div>
    	</div>
  </div> 
</div>
<script type="text/javascript">

function getAddress(val, objId) {
	$.ajax({
		type : "post",
		url : "${CTX}/area/getAreaList.do",
		async : false,
		dataType : 'json',
		data : {
			"eareId" : val
		},
		success : function(data) {
			changeAddress(data, objId);
		},
	});
}

function changeAddress(data, objId) {
	$("#" + objId).children().first().siblings().remove();
	var str = "";
	for (var i = 0; i < data.length; i++) {
		var areaName = data[i].name;
		var areaId = data[i].id
		var areaShow = $("#" + objId);
		str = '<option lng="'+ data[i].lng+'" lat="'+data[i].lat+'" value="'+areaId+'">'
				+ areaName + '</option>';
		areaShow.append(str);
	}
}

$("#city").change(function() {
	var cityId = $(this).val();
	$("#cityId").val(cityId);
	jQuery("#jqGrid").setGridParam({
		datatype : 'json',
		url : '${CTX}/busiArea/getBusiAreaQCPage.do?cityId=' + cityId
	}).trigger("reloadGrid");
	getAddress(cityId, "area");
	$("#area option").each(function() {
		if ($(this).text() == "杭州市") {

			$(this).attr("selected", true);
			$("#area").setGridParam({
				dataType : 'json'
			}).trigger("change");
		}
	});
	var lng = jQuery("#city  option:selected").attr("lng");
	var lat = jQuery("#city  option:selected").attr("lat");
	$("#lng").val(lng);
	$("#lat").val(lat);
});

$("#province").change(function() {
	$("#cityId").val("");
	var provinceId = $(this).val();
	getAddress(provinceId, "city");
	/**市默认选中*/
	$("#city option").each(function() {
		if ($(this).text() == "杭州市") {
			$(this).attr("selected", true);
			$("#city").trigger("change");
		}
	});
});
/**省默认选中*/
$("#province option").each(function() {
	if ($(this).text() == "浙江省") {
		$(this).attr("selected", true);
		$("#province").trigger("change");
	}
});
</script>