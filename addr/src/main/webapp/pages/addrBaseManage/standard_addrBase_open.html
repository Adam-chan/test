<div class="row">
	<div class="row">
		<div class="col-md-2 col-sm-2" style="margin-left:50px;" >
			<h4 style="margin:0px;">全地址:</h4>
	    </div>
		<div class="col-md-2 col-sm-2">
			<select id="areaIdOption"  class=" input-xs form-control">
					<option id="areaOption" value="" selected>${areaName!}</option>
					<#list provinceList as item>
						<option value="${item.id!}">${item.name!}</option>
					</#list>
			</select>
	    </div>
		<div class="col-md-3 col-sm-3">
			<select id="aasIdOption"  class=" input-xs form-control">
					<option id="subdistrictOption" value="">${aasName!}</option>
			</select>
	    </div>
	    <div class="col-md-3 col-sm-3">
			<select id="acIdOption"  class=" input-xs form-control">
					<option id="communityOption" value="">${acName!}</option>
			</select>
	    </div>
   </div>
   <div class="row" style="margin-top:10px;" >
			<div class="col-md-2 col-sm-2" style="margin-left:50px;" >
			<h4 style="margin:0px;"></h4>
	    </div>
		<div class="col-md-3 col-sm-3">
			<select id="road"  class="input-xs form-control">
					<option id="roadOption" value="">${roadName!}</option>
			</select>
	    </div>
		<div class="col-md-4 col-sm-4">
			<select id="premises"  class="input-xs form-control">
					<option id="premisesOption" value="">${bpName!}</option>
			</select>
	    </div>
   </div>
</div>
<script type="text/javascript">
aihome.url = "";
$(function (){
	$("#areaIdOption").change(function (){
		aihome.getPullDown($(this).val(),"aasIdOption",1);
	});
	$("#aasIdOption").change(function (){
		aihome.getPullDown($(this).val(),"acIdOption",2);
	});
})

/* 下拉得到数据 */
aihome.getPullDown = function(val,objId,type){
	if(type==1){
		url="${CTX}/area/getSubdistrictList.do";//街道下拉数据
	}else{
		url="${CTX}/area/getCommunityList.do";//社区下拉数据
	}
	 $.ajax({
	       type: "post",
	       url:url, 
	       async:false,
	       dataType:'json',
	       data: {"baseAreaId":val},//上级地区ID
	       success: function(data){
	    	   aihome.changeAddress(data,objId);
	       }
	 });
}
/* 下拉onchange事件触发后对请求回的数据进行编辑格式 */
aihome.changeAddress = function(data,objId){	
	$("#"+objId).children().first().siblings().remove();
	var str = "";
	for(var i=0;i<data.length;i++){
		var areaName = data[i].name;
		var areaId = data[i].id
	  	var areaShow = $("#"+objId);
		str = '<option value="'+areaId+'">'+areaName+'</option>';
		areaShow.append(str); //onchange事件后追加下一级下拉框中的数据
	}
}
</script>


