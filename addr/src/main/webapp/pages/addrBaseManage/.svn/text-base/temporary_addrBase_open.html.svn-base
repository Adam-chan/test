<div id="formerAddrDiv" class="col-sm-12 form-xs form-group row">
   <label for="addGrade" class="col-xs-2 control-label">具体地址:</label>
   <div class="col-xs-9">
      <input  type="text" readOnly="true"  class="form-control selectInput" value="${temAddrName!}" vRequired="true">
   </div>
</div>
<div id="addrDetailDiv" class="col-sm-12 form-xs form-group row">
   <label for="addGrade" class="col-xs-2 control-label">地址库地址:</label>
   <div class="col-xs-9">
      <input id="addrDetail" type="text" class="form-control selectInput" placeholder="输入地址库已存在地址"  value="" vRequired="true">
   </div>
</div>
<div id="checkContext" class="col-sm-12 form-xs form-group row">
   <label for="addGrade" class="col-xs-2 control-label">拒审理由:</label>
   <div class="col-xs-10">
   	 <textarea id="RefuseReason" cols="60" rows="4" name="textareaName" type="textarea" value=""></textarea>
   </div>
</div>
<input type=hidden id="houseInfoId" value="${houseInfoId!}"></input>
<input type=hidden id="bizType" value="${bizType!}"></input>
<script type="text/javascript">
	//详细地址模糊查询
   $("#addrDetail").autocomplete({
		source : function(request, response) {
			$.ajax({
				url : "${CTX}/addrBaseManage/getRoomAddrDetail.do",
				dataType : "json",
				type : 'post',
				data : {
					matchStr : request.term
				},
				success : function(data) {
					var array = [];
					for (var i = 0; i < data.length; i++) {
						var temp = {
							value : data[i].addrDetail,//详细地址
						};
						array.push(temp);
					}
					response(array);
				}
			});
		},
		select : function(event, ui) {
			$("#addrDetail").val(ui.item.value);
			event.preventDefault();
		}
   });
   /* 审核 */
   aihome.checkSucceed = function(rowId,houseInfoId,bizType,num){
	  var refuseContext = "";
	  var addrDetail = "";
	  refuseContext = $("#RefuseReason").val();
	  addrDetail = $("#addrDetail").val();
	  var checkStatus = "";
	  var result = false;
   	  if(num==2){
	   	if(refuseContext==""){
	   		alert("请填写拒审理由!")
	   	}else{
	   		checkStatus = "3";
	   		result = true;
	   	}
   	  }else{
   		refuseContext = "";
   		checkStatus = "2";
   		result = true;
   	  }
	if(!result){
		return result;
	}
   	 $.ajax({
   	       type: "post",
   	       url:"${CTX}/addrBaseManage/updateHouseAddr.do",
   	       async:false,
   	       dataType:'json',
   	       data: {"checkType":num,"temAddrBaseId":rowId,"bizType":bizType,"houseInfoId":houseInfoId,"refuseReson":refuseContext,"houseAddr":addrDetail,"checkStatus":checkStatus},
   	       success: function(data){
   	    	 if(data == 1){
   	    		if(num==2){
   	    			alert("拒审时录入地址库地址无效,请注意");
   	    		}else{
   	    			alert("审核时录入拒审理由无效,请注意");
   	    		}
	    	   }else{
	    		   alert("操作失败");
	    	   }
   	       }
   	 });
   	 return true;
   }
</script>


