<div class="col-xs-12">
	<form id="carPortDetailForm">
		<div class="row">
			<div class="col-xs-12 form-xs form-group row">
				<div class="col-xs-6">
					<label class="col-xs-4 control-label">编号：</label>
					<div class="col-xs-7">
						<input id="parkNum_detail" class="form-control input-xs" vRequired="true" name="parkNum" maxLength="20" value="${(carPort.parkNum)!''}">
					</div>
				</div>
				<div class="col-xs-6">
					<label class="col-xs-4 control-label">业主：</label>
					<div class="col-xs-7">
						<input class="form-control input-xs" name="ownerName" maxLength="20" value="${(carPort.ownerName)!''}">
					</div>
				</div>
			</div>
			<div class="col-xs-12 form-xs form-group row">
				<div class="col-xs-6">
					<label class="col-xs-4 control-label">楼层：</label>
					<div class="col-xs-7">
						<select id="floor_Detail" class="input-xs form-control" name="floor">
							<option value="1">地上</option>
							<option value="2">地下</option>
						</select>
					</div>
				</div>
				<div class="col-xs-6">
					<label class="col-xs-4 control-label">类型：</label>
					<div class="col-xs-7">
						<select id="type_detail" class="input-xs form-control" name="type">
							<option value="1">车位</option>
							<option value="2">车库</option>
						</select>
					</div>
				</div>
			</div>
			<div class="col-xs-12 form-xs form-group row">
				<div class="col-xs-6">
					<label class="col-xs-4 control-label">电话：</label>
					<div class="col-xs-7">
						<input class="form-control input-xs" name="telephone" maxLength="20" value="${(carPort.telephone)!''}">
					</div>
				</div>
				<div class="col-xs-6">
					<label class="col-xs-4 control-label">备用电话：</label>
					<div class="col-xs-7">
						<input class="form-control input-xs" name="spareTelephone" maxLength="20" value="${(carPort.spareTelephone)!''}">
					</div>
				</div>
			</div>
			<div class="col-xs-12 form-xs form-group row">
				<div class="col-xs-6">
					<label class="col-xs-4 control-label">现状：</label>
					<div class="col-xs-7">
						<select id="status_detail" class="input-xs form-control" name="status">
							<option value="">请选择</option>
							<option value="1">空置</option>
							<option value="2">自用</option>
						</select>
					</div>
				</div>
				<div class="col-xs-6">
					<label class="col-xs-4 control-label">关联房间：</label>
					<div class="col-xs-7">
						<input id="roomNum_detail" class="form-control input-xs" maxLength="20" value="${(carPort.roomNum)!''}" disabled="true">
					</div>
					<#if carPort.roomNum??>
						<div id="release" class="col-xs-1">
							<button><i class="glyphicon glyphicon-remove"></i></button>
						</div>
					</#if>
				</div>
			</div>
			<div class="col-xs-12 form-xs form-group row">
	         <label class="col-xs-2 control-label" style="left:-0.8%">备注 :</label>
	         <div class="col-xs-10" style="width:77.5%">
	            <textarea id="remark" rows="5" cols="25" class="form-control" maxlength="300">${(carPort.remark)!''}</textarea>
	         </div>
	        </div>
		</div>
		<!-- 隐藏域 S -->
		<input id="roomId_detail" type="hidden" value="${(carPort.roomId)!''}">
		<input id="carPortId_detail" name="carPortId" type="hidden" value="${(carPort.id)!''}">
		<!-- 隐藏域 e -->
	</form>
</div>

<script type="text/javascript">

/* 解除关联*/
$("#release").click(function() {
	if(confirm("确认解除关联？")){
		$.ajax({
			url : "${CTX}/carPort/removeRoom.do",
			dataType : "json",
			data : {
				carPortId : $("#carPortId_detail").val()
			},
			success : function(data) {
				if(data==1){
					alert("解除关联成功！");
					$("#roomNum_detail").val("");
					$("#release").hide();
				}else{
					alert("解除失败！");
				}
			}
		});
	}
});

//判断车位号唯一性
$("#parkNum_detail").blur(function() {
    var parkNum = $("#parkNum_detail").val(); 
    var floor = $("#floor_detail").val();
    var type = $("#type_detail").val();
    var premisesId = $("#premisesId").val();
    var carPortId = $("#carPortId_detail").val();
    if (parkNum != "") {
        $.ajax({
            url: "${CTX}/carPort/getCarPortIs.do",
            data: {
                parkNum: parkNum,
                floor: floor,
                type: type,
                premisesId: premisesId,
                carPortId:carPortId
            },
            type: "post",
            dataType: "json",
            success: function(data) {
                if (data == 1) {
                    alert("该车位号已存在！");
                    $("#parkNum_detail").val("");
                }
            }
        });
    }
});

//修改-数据初始化
var floor = "${(carPort.floor)!''}";//楼层
if(floor!=""){
	$("#floor_Detail").find("[value='"+floor+"']").attr("selected", "selected");
}
var type = "${(carPort.type)!''}";//类型
if(type!=""){
	$("#type_detail").find("[value='"+type+"']").attr("selected", "selected");
}
var status = "${(carPort.status)!''}";//现状
if(status!=""){
	$("#status_detail").find("[value='"+status+"']").attr("selected", "selected");
}
</script>